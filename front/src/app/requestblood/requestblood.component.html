<div class="sidebar-logo">
  <div class="welcometxt" style="float: left">
    <b style="color: white">User Dashboard</b>
  </div>
  <button class="logoutbtn" (click)="navigateHome()">
    <i class="fa fa-home"></i> Home
  </button>
  <b class="sidebar-text" style="color: whitesmoke"
    ><i class="fa fa-user"></i> Welcome {{ loggedUser }}</b
  >
  <button class="logoutbtn" (click)="(logout)">
    <i class="fa fa-sign-out"></i> Logout
  </button>
</div>

<div class="container" id="requestBlood">
  <h3 class="textual">
    <i class="fa fa-plus" aria-hidden="true"></i> Request Blood
  </h3>
  <div style="text-align: center; color: green">
    <b>{{ msg }}</b>
  </div>
  <form #donateForm="ngForm" (ngSubmit)="requestBlood()">
    
    <div class="form-group">
      <mat-form-field appearance="fill" class="mat-form-field-custom">
        <mat-label>Patient Name</mat-label>
        <input
          matInput
          placeholder="enter Patient name"
          name="patientname"
          [(ngModel)]="request.name"
          required
          #patientname="ngModel"
          [class.is-invalid]="patientname.invalid && patientname.touched"
        />
        <mat-error *ngIf="patientname.invalid && patientname.touched">
          <span><b>Required field</b></span>
        </mat-error>
      </mat-form-field>
    </div>

    <div class="form-group">
      <mat-form-field appearance="fill" class="mat-form-field-custom">
        <mat-label>Patient Email Address</mat-label>
        <input
          matInput
          placeholder="Enter [Patient email"
          name="email"
          [(ngModel)]="request.email"
          required
          pattern="^[a-zA-Z0-9+_.-]+@[a-zA-Z0-9.-]+$"
          #email="ngModel"
          [class.is-invalid]="email.invalid && email.touched"
        />
        <mat-error *ngIf="email.errors && email.invalid && email.touched">
          <span *ngIf="email.errors['required']"><b>Required field</b></span>
          <span *ngIf="email.errors['pattern']"><b>Invalid email Id</b></span>
        </mat-error>
      </mat-form-field>
    </div>



    <div class="form-group">
      <mat-form-field appearance="fill" class="mat-form-field-custom">
        <mat-label>Patient Blood Group</mat-label>
        <mat-select
          placeholder="Select Blood Group"
          name="bloodgroup"
          [(ngModel)]="request.bloodgroup"
          #bloodgroup="ngModel"
          required
        >
          <mat-option value="A+">A+</mat-option>
          <mat-option value="A-">A-</mat-option>
          <mat-option value="B+">B+</mat-option>
          <mat-option value="B-">B-</mat-option>
          <mat-option value="AB+">AB+</mat-option>
          <mat-option value="AB-">AB-</mat-option>
          <mat-option value="O+">O+</mat-option>
          <mat-option value="O-">O-</mat-option>
          <mat-option value="A+">A+</mat-option>
        </mat-select>
        <mat-error *ngIf="bloodgroup.invalid && bloodgroup.touched">
          <span><b>Required field</b></span>
        </mat-error>
      </mat-form-field>
    </div>



    <div class="form-group">
      <mat-form-field appearance="fill" class="mat-form-field-custom">
        <mat-label>Required Blood units </mat-label>
        <mat-select
          placeholder="Select Blood Units"
          name="units"
          id="sel1"
          [(ngModel)]="request.units"
          #units="ngModel"
          required
        >
          <mat-option value="1">1</mat-option>
          <mat-option value="2">2</mat-option>
          <mat-option value="3">3</mat-option>
        </mat-select>

        <mat-error *ngIf="units.invalid && units.touched">
          <span><b>Required field</b></span>
        </mat-error>
      </mat-form-field>
    </div>
    <small style="color: grey; font-size: 10px; font-weight: bold"
      >Maximum units can be donated is 3 pints</small
    >

    <div class="form-group">
      <mat-form-field appearance="fill" class="mat-form-field-custom">
        <mat-label>Patient Disease</mat-label>
        <input
          matInput
          placeholder="Enter Patient Disease name"
          name="disease"
          [(ngModel)]="request.disease"
          required
          #disease="ngModel"
          [class.is-invalid]="disease.invalid && disease.touched"
        />
        <mat-error *ngIf="disease.invalid && disease.touched">
          <span><b>Required field</b></span>
        </mat-error>
      </mat-form-field>
    </div>

    <div class="form-group">
      <mat-form-field appearance="fill" class="mat-form-field-custom">
        <mat-label>Patient Mobile Number</mat-label>
        <input
          matInput
          type="tel"
          placeholder="Enter mobile number"
          name="mobile"
          [(ngModel)]="request.mobile"
          required
          #mobile="ngModel"
          [class.is-invalid]="mobile.invalid && mobile.touched"
        />
        <mat-error *ngIf="mobile.invalid && mobile.touched">
          <span><b>Required field</b></span>
        </mat-error>
      </mat-form-field>
    </div>

    <div class="form-group">
      <mat-form-field appearance="fill" class="mat-form-field-custom">
        <mat-label>Patient Gender</mat-label>
        <mat-select
          placeholder="Select gender"
          name="gender"
          id="sel1"
          [(ngModel)]="request.gender"
          #gender="ngModel"
          required
        >
          <mat-option value="Male">Male</mat-option>
          <mat-option value="Female">Female</mat-option>
          <mat-option value="Others">Others</mat-option>
        </mat-select>
        <mat-error *ngIf="gender.invalid && gender.touched">
          <span><b>Required field</b></span>
        </mat-error>
      </mat-form-field>
    </div>



    <div class="form-group">
      <mat-form-field appearance="fill" class="mat-form-field-custom">
        <mat-label>Patient Age</mat-label>
        <input
          matInput
          type="number"
          placeholder="Enter patient age"
          name="age"
          [(ngModel)]="request.age"
          required
          #age="ngModel"
          [class.is-invalid]="age.invalid && age.touched"
        />
        <mat-error *ngIf="age.invalid && age.touched">
          <span><b>Required field</b></span>
        </mat-error>
      </mat-form-field>
    </div>

    <button
      [disabled]="donateForm.form.invalid"
      type="submit"
      class="btn registerbtn"
    >
      Send Request
    </button>
  </form>
</div>

